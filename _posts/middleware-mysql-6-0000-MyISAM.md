---
author: djaigo
title: middleware-mysql-6-0000-MyISAM
categories:
  - null
date: 2023-03-29 19:49:54
tags:
---
MyISAM 基于旧的（不再可用）ISAM 存储引擎，但有许多有用的扩展。

每个 MyISAM 表都以三个文件的形式存储在磁盘上。这些文件的名称以表名开头，并具有指示文件类型的扩展名。 .frm 文件存储表格格式。数据文件的扩展名为 .MYD (MYData)。索引文件的扩展名为 .MYI (MYIndex)。
在 MySQL 5.7 中，通常需要使用 ENGINE 来指定 MyISAM 存储引擎，因为 InnoDB 是默认引擎。
您可以使用 mysqlcheck 客户端或 myisamchk 实用程序检查或修复 MyISAM 表。您还可以使用 myisampack 压缩 MyISAM 表以占用更少的空间。

MyISAM 表具有以下特点：

* 所有数据值都以低字节在前存储。这使得数据机和操作系统独立。二进制可移植性的唯一要求是机器使用二进制补码符号整数和 IEEE 浮点格式。这些要求在主流机器中被广泛使用。二进制兼容性可能不适用于嵌入式系统，嵌入式系统有时具有特殊的处理器。

* 先存储数据低字节没有显着的速度损失；表行中的字节通常是未对齐的，按顺序读取未对齐的字节比按相反顺序读取需要更多的处理。此外，与其他代码相比，服务器中获取列值的代码对时间的要求不高。

* 所有数字键值都先存储高字节，以允许更好的索引压缩。

* 支持大文件的文件系统和操作系统支持大文件（最大 63 位文件长度）。

* MyISAM 表中有 (232)2 (1.844E+19) 行的限制。

* 每个 MyISAM 表的最大索引数是 64。

* 每个索引的最大列数为 16。

* 最大密钥长度为 1000 字节。这也可以通过更改源代码和重新编译来更改。对于长于 250 字节的密钥，使用比默认值 1024 字节更大的密钥块大小。

* 当按排序顺序插入行时（如使用 AUTO_INCREMENT 列时），索引树将被拆分，以便高节点仅包含一个键。这提高了索引树中的空间利用率。

* 支持对每个表的一个 AUTO_INCREMENT 列进行内部处理。 MyISAM 为 INSERT 和 UPDATE 操作自动更新此列。这使得 AUTO_INCREMENT 列更快（至少 10%）。序列顶部的值在删除后不会重复使用。 （当 AUTO_INCREMENT 列被定义为多列索引的最后一列时，会重复使用从序列顶部删除的值。）可以使用 ALTER TABLE 或 myisamchk 重置 AUTO_INCREMENT 值。

* 将删除与更新和插入混合使用时，动态大小的行的碎片要少得多。这是通过自动组合相邻的已删除块并在下一个块被删除时扩展块来完成的。

* MyISAM 支持并发插入：如果一个表在数据文件中间没有空闲块，您可以在其他线程从表中读取的同时向其中插入新行。删除行或更新动态长度行的数据多于其当前内容时，可能会出现空闲块。当所有空闲块都用完（填充）时，未来的插入将再次变为并发。请参阅第 8.11.3 节，“并发插入”。

* 您可以将数据文件和索引文件放在不同物理设备上的不同目录中，以使用 DATA DIRECTORY 和 INDEX DIRECTORY 表选项来更快地创建表。请参阅第 13.1.18 节，“CREATE TABLE 语句”。

* BLOB 和 TEXT 列可以被索引。

* 索引列中允许 NULL 值。每个密钥需要 0 到 1 个字节。

* 每个字符列可以有不同的字符集。请参阅第 10 章，字符集、排序规则、Unicode。

* MyISAM 索引文件中有一个标志指示表是否正确关闭。如果 mysqld 启动时设置了 myisam_recover_options 系统变量，则 MyISAM 表在打开时会自动检查，如果表未正确关闭则进行修复。

* 如果您使用 --update-state 选项运行 myisamchk，它会将表标记为已检查。 myisamchk --fast 只检查那些没有这个标记的表。

* myisamchk --analyze 存储部分密钥以及整个密钥的统计信息。

* myisampack 可以打包 BLOB 和 VARCHAR 列。

MyISAM 还支持以下功能：

* 支持真正的 VARCHAR 类型； VARCHAR 列以存储在一个或两个字节中的长度开始。

* 具有 VARCHAR 列的表可能具有固定或动态的行长度。

* 表中 VARCHAR 和 CHAR 列的长度总和可能高达 64KB。

* 任意长度的 UNIQUE 约束。
