---
author: djaigo
title: ss运行原理
img: 'https://img-1251474779.cos.ap-beijing.myqcloud.com/golang.png'
categories:
  - null
tags:
  - null
date: 2020-03-11 15:51:22
updated: 2020-03-11 15:51:22
---

# 什么是Shadowsocks

Shadowsocks（简称 SS）是一种轻量级的加密代理工具，常用于实现网络流量的科学上网。其“运行原理”可以简要描述如下：

1. **本地代理**  
客户端用户首先在本地运行一个 shadowsocks 客户端程序。该程序监听一个本地端口（如1080），作为本地 SOCKS5 或 HTTP 代理。

2. **本地加密转发**  
当用户的浏览器或其他程序通过配置的本地代理访问网络时，所有的请求数据会被 shadowsocks 客户端捕获，并按照预先设定的加密方式（如 AES-256-GCM、ChaCha20 等）进行加密。

3. **数据上传服务器**  
加密后的数据被安全地发送到 shadowsocks 服务器（通常部署在国外）。

4. **服务器解密转发**  
shadowsocks 服务器端监听指定端口，接收来自客户端的加密数据，对数据进行解密，还原成原始请求内容。然后，服务器以普通代理的方式将请求转发到目标网站或服务器。

5. **下行回程同理**  
目标网站的响应先返回到 shadowsocks 服务器，由其加密后发回客户端。本地客户端解密接收到的数据并交给用户的浏览器等程序处理。

**核心原理简述**  
Shadowsocks 的本质是“加密转发流量”，通过分离加密和代理功能、流量混淆等技术，提高了隐私和难以被封锁的能力。它不负责翻墙，而是让流量可以突破网络审查，被目标服务器识别为正常加密连接。

**主要流程图示意**  
用户程序 ←→ SS本地客户端（加密/解密）←→ 加密隧道 ←→ SS服务器（解密/加密）←→ 目标网站

**特点**  
- 轻量、速度快、延时低
- 支持多种加密算法
- 配置简单，跨平台
- 流量伪装相对较弱，易被深度包检测（DPI）针对

Shadowsocks 作为网络代理工具，通常配合OBFS（混淆插件）、V2Ray等进一步提升隐匿性。

# 数据流转

```mermaid
flowchart LR
    A[用户程序] <-->|本地 SOCKS5/HTTP 代理| B[SS本地客户端<br/>(加密/解密)]
    B <-->|加密流量| C[加密隧道（如TCP/UDP）]
    C <-->|加密流量| D[SS服务器<br/>(解密/加密)]
    D <-->|明文流量| E[目标网站]

    E --|响应数据| D
    D --|加密流量| C
    C --|加密流量| B
    B --|明文流量| A
```
流程描述：用户程序通过本地 SS 客户端将流量加密后，经加密隧道传递到 SS 服务器，解密后转发给目标网站，回程响应同理经加密隧道返回本地客户端。

# Shadowsocks 与 VPN 有什么区别？

Shadowsocks 和 VPN 都可以用于科学上网，但两者原理、使用方式和隐蔽性等方面有明显区别：

1. **工作原理不同**  
   - **VPN（虚拟专用网络）**：是在用户设备和VPN服务器之间建立一个加密的“隧道”，将所有流量重定向和转发，用户访问的所有内容（包括 DNS 查询、操作系统背景流量等）都会经过这个隧道。常见协议有：OpenVPN、IKEv2、WireGuard 等。
   - **Shadowsocks**：是一种加密的“代理”协议，本质上是“加密版Socks5代理”。用户或应用只需通过代理转发的流量才会经过 Shadowsocks，其余直连，通常不能全局劫持所有系统流量（但可以用工具实现全局代理）。

2. **用途和配置**  
   - **VPN**：适合需要整体切换网络出口、全局流量伪装的场景。配置更复杂，需安装专用客户端或借助系统VPN功能。
   - **Shadowsocks**：配置简单、轻量，支持分应用、分端口代理，适合桌面浏览器、移动App等具体软件单独走代理。适合精细化流量管理。

3. **被封锁和隐蔽性**  
   - **VPN**：传统VPN协议指纹明显，容易被防火墙（如GFW）识别和封锁。部分新协议（如WireGuard、使用tls混淆的OpenVPN）有改进，但原生VPN易受限。
   - **Shadowsocks**：通过加密、特征混淆（如插件：obfs、v2ray-plugin）可以更好地规避封锁。但如果不加混淆插件，Shadowsocks本身有一定特征，可能会被检测。

4. **安全性和用途**  
   - **VPN**：可用于企业内网访问、远程办公，流量加密后可防止网络监听。
   - **Shadowsocks**：设计用于突破封锁，更侧重隐蔽性和轻量流量转发，不适用于企业私有安全网络场景。

5. **转发流量范围**  
   - **VPN**：转发的是“全局所有流量”（除非配置路由表例外）。
   - **Shadowsocks**：默认仅代理“指定流量”（如浏览器访问、特定端口），其余走直连。可借助系统转发工具实现全局代理。

6. **总结表格**

| 比较项        | Shadowsocks               | VPN                          |
| ------------- | ------------------------ | ---------------------------- |
| 加密方式      | 自有Socks5加密协议        | 标准加密协议（如OpenVPN等）  |
| 流量范围      | 应用/端口级，灵活         | 全局网络流量                 |
| 配置难度      | 低，轻量、跨平台          | 略高，需安装客户端           |
| 被墙概率      | 低（加混淆插件时）        | 较高（如未混淆）             |
| 显隐特征      | 难以检测（混淆时）        | 容易被识别                   |
| 典型用途      | 科学上网，分流代理         | 科学上网/企业办公/远程管理   |

**结论**：  
- **日常科学上网推荐 Shadowsocks**，配合混淆插件安全性更高，分流更灵活。  
- **需要全局流量加密/企业联网用VPN**。两者可视需求结合使用。







