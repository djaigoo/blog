---
author: djaigo
title: https流程
tags:
  - http
  - https
  - tls
categories:
  - net
date: 2022-11-24 10:45:43
---

# TLS
TLS（Transport Layer Security）传输层安全性协议，用于保证传输层数据的安全。
TLS协议保证的通信链路安全性，但是不能防止中间者攻击（秘钥篡改、内容窃听等）。
TLS采用握手非对称加密，传输对称加密的方法，让安全和传输速率得到了保证。

# HTTP
HTTP（Hyper Text Transfer Protocol）超文本传输协议，该协议是一个明文的应用层传输协议。
HTTP在实际中有着广泛的应用，可对外网和内网传输，功能强大，随机时间推移已经衍生出HTTP2、HTTP3等协议。

# HTTPS
将HTTP的数据基于TLS协议进行保护，就形成了HTTPS协议，充分利用两种协议的优势完成安全链路的建立。
为了防止中间人攻击HTTPS增加了证书验签的环节，保证了数据传输的安全性和可靠性。

## CA
CA（Certificate Authority）数字证书认证机构，对公钥颁布证书，是受信任的第三方，防止中间者进行攻击。
服务器对CA操作流程：

1. 服务器生成非对称密钥对
2. 向CA注册服务器公钥
3. CA用CA私钥对服务器公钥进行哈希签名，生成服务器证书

完成上述操作，客户端就可以放心的与服务器进行HTTPS连接。

## connect
客户端在与服务器进行连接前会先访问CA机构验证公钥是否安全。
客户端操作流程：

1. 向CA获取服务器公钥和服务器证书
2. 客户端用CA公钥验证服务器证书和服务器公钥是否匹配，不匹配则显示警告
3. 验证服务器公钥成功，就可以安全的与服务器进行TLS通信

其中由于CA机构数量有限，一般的程序都会内置知名的CA公钥，不会受到篡改。